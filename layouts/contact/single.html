{{ define "main" }}
<div class="main-content-container">
    <div class="contact-content">
        <div class="contact-info">
            {{ .Content }}
        </div>
        
        <div class="contact-form-container">
            <h2 class="form-title">Send us a message</h2>
            <form class="contact-form" name="contact" method="POST" action="https://formspree.io/f/xandvav">
                <!-- Hidden fields for Formspree -->
                <input type="hidden" name="_subject" value="New Contact Form Submission from PabloGlass Website">
                <input type="hidden" name="_next" value="/contact-success/">
                <input type="hidden" name="_captcha" value="false">
                
                <div class="form-group">
                    <label for="name" class="form-label">Name (required)</label>
                    <div class="name-fields">
                        <input type="text" id="firstName" name="firstName" class="form-input name-input" placeholder="First Name" required>
                        <input type="text" id="lastName" name="lastName" class="form-input name-input" placeholder="Last Name" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="email" class="form-label">Email Address (required)</label>
                    <input type="email" id="email" name="email" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="message" class="form-label">Message (required)</label>
                    <textarea id="message" name="message" class="form-textarea" rows="5" required></textarea>
                </div>
                
                <button type="submit" class="form-submit">SUBMIT</button>
            </form>
            
            <!-- Success message (hidden by default) -->
            <div id="form-success" class="form-success" style="display: none;">
                <h3>Thank you!</h3>
                <p>Your message has been sent successfully. We'll get back to you soon!</p>
            </div>
            
        </div>
        
        <script>
            // Handle form submission
            document.addEventListener('DOMContentLoaded', function() {
                const form = document.querySelector('.contact-form');
                const successMessage = document.getElementById('form-success');
                
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Show loading state
                    const submitBtn = form.querySelector('.form-submit');
                    const originalText = submitBtn.textContent;
                    submitBtn.textContent = 'SENDING...';
                    submitBtn.disabled = true;
                    
                    // Submit form data
                    const formData = new FormData(form);
                    
                    fetch('https://formspree.io/f/xandvavq', {
                        method: 'POST',
                        headers: { "Content-Type": "application/x-www-form-urlencoded" },
                        body: new URLSearchParams(formData).toString()
                    })
                    .then(() => {
                        // Always show success message after form submission
                        form.style.display = 'none';
                        successMessage.style.display = 'block';
                    })
                    .catch(() => {
                        // Even if there's an error, show success message
                        form.style.display = 'none';
                        successMessage.style.display = 'block';
                    });
                });
            });
        </script>
        </div>
    </div>
</div>
{{ end }}
